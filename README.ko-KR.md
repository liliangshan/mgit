# MGit - Git 프로젝트 관리 도구

## 소개
MGit은 여러 Git 프로젝트를 관리하기 위한 명령줄 도구입니다. 여러 Git 저장소를 효율적으로 관리, 동기화 및 업데이트할 수 있습니다.

## 주요 기능
- 다중 프로젝트 관리: 여러 Git 프로젝트를 원클릭으로 관리하여 작업 효율성 향상
- 다국어 지원: 한국어, 중국어(간체/번체), 영어, 일본어, 프랑스어 등 다양한 언어 지원
- 원격 데이터베이스 동기화: 여러 장치 간의 프로젝트 설정 동기화 지원
- 버전 관리: 자동 업데이트가 포함된 내장 버전 관리
- 시스템 통합: 시스템 환경 변수에 추가하여 어디서나 사용 가능
- 스마트 브랜치 관리: 브랜치 자동 감지 및 전환으로 충돌 방지
- 일괄 작업: 여러 프로젝트의 변경 사항을 동시에 풀/푸시 지원

## 기능 상세

### 1. 효율적인 협업
- 여러 장치 간 설정 자동 동기화로 팀원들이 동일한 프로젝트 설정 사용
- 팀 프로젝트 통합 관리로 설정 불일치 방지
- 일괄 작업으로 시간 절약 및 작업 효율성 향상
- 스마트 브랜치 관리로 브랜치 전환 및 동기화 자동 처리

### 2. 사용자 친화적
- 직관적인 조작이 가능한 대화형 명령줄 인터페이스
- 다국어 현지화로 언어 장벽 해소
- 스마트한 프롬프트와 도움말로 학습 곡선 완화
- 통일된 명령어 형식으로 기억하고 사용하기 쉬움

### 3. 안전성과 신뢰성
- 설정 자동 백업으로 우발적 손실 방지
- 버전 관리 보호로 롤백 작업 지원
- 지능적인 충돌 처리로 데이터 안전성 보장
- 권한 관리로 오조작 방지

### 4. 높은 확장성
- 사용자 정의 설정으로 다양한 요구 사항 충족
- 유연한 프로젝트 관리로 다양한 시나리오 대응
- 지속적인 업데이트와 개선으로 최적화 유지
- 플러그인 확장 지원으로 기능 확장 가능

## 버전 업데이트 정보
1.0.16
- `mgit new` 명령으로 애플리케이션 인스턴스 관리 기능 추가
- 애플리케이션 이름 기반 설정 및 데이터베이스 파일 명명 규칙 최적화
- 환경 변수 자동 설정 기능 추가
- 원격 데이터베이스 강제 업데이트 기능 추가(활성화된 경우)
- 여러 원격 브랜치가 있는 경우 단일 풀 시 브랜치 선택 기능 추가
- 로컬 및 원격 브랜치 전환 기능 추가

## 새로운 기능 상세

### 1. 애플리케이션 인스턴스 관리
- 새로운 애플리케이션 인스턴스 생성:
  ```bash
  mgit new newapp  # newapp이라는 이름의 새 애플리케이션 인스턴스 생성
  mgit new         # 대화형으로 생성
  ```
  - 새 애플리케이션은 현재 애플리케이션의 모든 기능 상속
  - 각 인스턴스는 독립적인 설정 파일과 데이터베이스 보유
  - 애플리케이션 이름에서 잘못된 문자 자동 제거
  - 동일한 이름의 애플리케이션이 존재하는 경우 해당 앱 사용 안내

### 2. 설정 파일 명명 규칙
프로그램 이름을 기반으로 설정 파일 자동 선택:
- mgit.exe: `.env` 파일 사용
- 기타 앱: `.앱이름.env` 파일 사용
예: gitmanager.exe -> .gitmanager.env

### 3. 데이터베이스 파일 명명 규칙
데이터베이스 파일도 애플리케이션 이름 규칙을 따름:
- mgit.exe: `projects.db` 파일 사용
- 기타 앱: `앱이름.db` 파일 사용
예: gitmanager.exe -> gitmanager.db

### 4. 원격 데이터베이스 디렉터리
원격 데이터베이스 디렉터리도 애플리케이션 이름 사용:
- mgit.exe: `.mgit_db` 디렉터리 사용
- 기타 앱: `.앱이름_db` 디렉터리 사용
예: gitmanager.exe -> .gitmanager_db

### 5. 환경 변수 설정
현재 애플리케이션 디렉터리를 시스템 환경 변수에 자동 설정:
```bash
mgit env  # MGIT_PATH 또는 앱이름_PATH 환경 변수 자동 생성
```
- 환경 변수 이름은 애플리케이션 이름 기반으로 생성
- 동일한 환경 변수 존재 여부 자동 확인
- Windows 시스템에서는 관리자 권한 필요
- 일부 설정은 시스템 재시작 후 적용

### 주의 사항
1. 새로운 애플리케이션 인스턴스 생성 시:
   - 새 애플리케이션이 자동으로 시작됨
   - 새 애플리케이션은 독립적인 설정과 데이터를 가짐
   - 동일한 이름의 애플리케이션이 존재하는 경우 생성 불가

2. 환경 변수 설정:
   - Windows 시스템에서는 관리자 권한 필요
   - 환경 변수 적용을 위해 시스템 재시작이 필요할 수 있음
   - 인코딩 문제를 피하기 위해 영문 경로 권장

3. 데이터 저장:
   - 모든 설정 파일과 데이터베이스는 애플리케이션 디렉터리에 저장
   - 원격 데이터베이스 디렉터리는 독립 Git 저장소로 관리
   - 여러 장치 간 설정 자동 동기화 지원

## 설치 가이드

### 초기 설정
```bash
# 도구 초기화
./mgit init
# 또는
./mgit init mgit
```

### 환경 설정
```bash
# 기기 식별자 설정
./mgit set machine your-machine-name

# 프로젝트 저장 경로 설정
./mgit set path /your/custom/path

# 현재 설정 확인
./mgit set
```

## 기본 설정
도구는 .env 파일로 설정을 저장:

```env
# 기기 식별자
MACHINE_ID=machine-01

# 애플리케이션 경로(모든 프로젝트의 상위 디렉터리)
APP_PATH=/path/to/projects

# 환경 변수 설정
MGIT_LANG=ko-KR
```

## 데이터베이스와 설정 파일 설명

### 파일 명명 규칙
프로그램 이름을 기반으로 설정 파일과 데이터베이스 파일 자동 선택:

1. 설정 파일:
   - mgit.exe: `.env` 파일 사용
   - 기타 앱: `.앱이름.env` 파일 사용
   예: gitmanager.exe -> .gitmanager.env

2. 로컬 데이터베이스:
   - mgit.exe: `projects.db` 파일 사용
   - 기타 앱: `앱이름.db` 파일 사용
   예: gitmanager.exe -> gitmanager.db

3. 원격 데이터베이스 디렉터리:
   - mgit.exe: `.mgit_db` 디렉터리 사용
   - 기타 앱: `.앱이름_db` 디렉터리 사용
   예: gitmanager.exe -> .gitmanager_db

### 원격 데이터베이스 동기화
```bash
./mgit set
# "데이터베이스 저장소 동기화 활성화" 선택
# 데이터베이스 저장소 주소 입력
```

### 데이터 동기화 메커니즘
- 푸시 작업 후 자동으로 데이터베이스 동기화
- 풀 작업 전 자동으로 최신 설정 가져오기
- 여러 사용자 협업 지원, 설정 자동 병합

### 동기화 내용
- 프로젝트 설정 정보(앱이름.db에 저장)
- 브랜치 설정
- 마지막 커밋 기록
- 장치 식별자

### 데이터 저장 위치
1. 로컬 데이터베이스:
   - 애플리케이션 디렉터리에 저장
   - 애플리케이션 이름 기반으로 자동 데이터베이스 파일 생성

2. 원격 데이터베이스:
   - APP_PATH 디렉터리 아래 .앱이름_db 디렉터리에 저장
   - 독립 Git 저장소로 관리
   - 여러 장치 간 설정 자동 동기화 및 병합

### 중요 주의 사항
- 데이터베이스 파일은 첫 사용 시 자동 생성됨
- 원격 데이터베이스 동기화에는 유효한 Git 저장소 주소 필요
- 데이터베이스 파일은 자동으로 백업되어 데이터 손실 방지
- 원격 데이터베이스 전환 시 기존 데이터는 자동으로 이전됨

## 명령어 사용 가이드

### 애플리케이션 인스턴스 생성
```bash
# 새 애플리케이션 인스턴스 생성(이름 지정)
./mgit new project_manager

# 새 애플리케이션 인스턴스 생성(대화형)
./mgit new
# 프롬프트에 따라 새 애플리케이션 이름 입력
```

### 프로젝트 초기화
```bash
# 새 프로젝트 초기화
./mgit init project_name https://github.com/user/repo.git

# 새 프로젝트 생성
./mgit init mgit
# 또는 간단히
./mgit init
```

### 코드 풀
```bash
# 단일 프로젝트 풀
./mgit pull project_name
# 또는
./mgit pull
# 대화형 메뉴에서 동기화할 프로젝트 선택

# 모든 프로젝트 풀
./mgit pull-all
```

### 코드 푸시
```bash
# 단일 프로젝트 푸시
./mgit push project_name
# 또는
./mgit push
# 대화형 메뉴에서 푸시할 프로젝트 선택
# 커밋 메시지 입력(비워두면 기기 이름 사용)

# 모든 프로젝트 푸시
./mgit push-all
```

### 브랜치 관리
```bash
# 대화형 브랜치 설정
./mgit branch

# 특정 프로젝트의 로컬 및 원격 브랜치 설정
./mgit branch project_name local_branch remote_branch
```

### 풀 브랜치 설정
```bash
# 대화형 풀 브랜치 설정
./mgit set pull-branch

# 특정 프로젝트의 풀 브랜치 설정
./mgit set pull-branch project_name branch_name
```

### 프로젝트 관리
```bash
# 프로젝트 목록 보기
./mgit list

# 프로젝트 삭제
./mgit delete
# 대화형 메뉴에서 삭제할 프로젝트 선택
```

### 도움말 보기
```bash
./mgit help
# 또는 별칭 사용
./mgit h
./mgit -h
./mgit -help
```

## 대화형 메뉴 예시

### 프로젝트 선택 메뉴
1. 단일 프로젝트 풀/푸시:
```bash
? 작업할 프로젝트 선택 (방향키 사용)
❯ project1 - /path/to/project1
  project2 - /path/to/project2
  project3 - /path/to/project3
  [취소]
```

2. 브랜치 관리:
```bash
? 브랜치를 설정할 프로젝트 선택
❯ project1 (현재: main -> origin/main)
  project2 (현재: develop -> origin/develop)
  [취소]

? 로컬 브랜치 이름 입력: main
? 원격 브랜치 이름 입력: origin/main
```

3. 프로젝트 삭제:
```bash
? 삭제할 프로젝트 선택
❯ project1 - /path/to/project1
  project2 - /path/to/project2
  [취소]

? project1을 삭제하시겠습니까? (Y/n)
```

## 환경 변수 설정 안내

### 명령어 사용법
```bash
mgit env
```

### 기능 설명
- 애플리케이션 디렉터리를 자동으로 시스템 환경 변수로 설정
- 환경 변수 이름은 애플리케이션 이름을 기반으로 생성되며, 형식은 `앱이름_PATH`
- 예시:
  - mgit.exe -> MGIT_PATH
  - gitmanager.exe -> GITMANAGER_PATH

### 시스템 환경 변수 설정

MGit을 시스템 PATH에 추가하여 전역 액세스 실현:

1. Windows:
```powershell
# MGit 디렉터리를 사용자 PATH에 추가
setx PATH "%PATH%;D:\path\to\mgit"
```

2. Linux/macOS:
```bash
# ~/.bashrc 또는 ~/.zshrc 편집
echo 'export PATH="$PATH:/path/to/mgit"' >> ~/.bashrc
source ~/.bashrc
```

설정 완료 후, 어느 디렉터리에서나 `mgit` 명령어를 사용할 수 있습니다. 도구는 설정에 따라 프로젝트 관리, 동기화, 환경 설정을 자동으로 처리합니다.